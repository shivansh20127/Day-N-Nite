<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            |    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <title>Check Out</title>
        <style>
        </style>
    </head>

    <body>
        <div class="container">
            <div class="flex d-flex form-label mt-4 justify-content-between">
                <a href="/" style="text-decoration: none">
                    | <h1 class="me-4">Day n Nite Store</h1>
                    | </a>
                <form action="/" method="POST" class="d-flex flex mt-2 col-6">
                    <input type="search" name="searchbox" class="form-control px-3" aria-label="searchbox"
                    |    placeholder="Search Here">
                    <button type="submit" class="ms-1 px-2" value="OK">GO</button>
                </form><a href="/signin" style="color: black; margin-top: 15px;">#{userid}</a>
            </div>
            <h2 class="mt-5 mb-4 mx-1">Check Out</h2>
            <div>
                <div class="mb-3">
                    <div style="width: 100%;">
                    if cart_products.length == 0
                        <div class="mx-5" style="width: 100%;">
                            <p class="text.dark"><span class="fw-bold">None </p>
                        </div>
                    else
                        <div class="mx-5" style="width: 100%; ">
                            each val,index in cart_products
                                <div class="d-flex flex" style="width: 100%; border-bottom: 2px solid grey;"> 
                                    <img src="#{val.Product_link}" alt="" srcset="" class="img-thumbnail me-3 m-2" style="display: block; height: 50px; width: 50px">
                                    <p class="mt-3">#{val.Product_Name} || <a href="/productPage/#{val.ProductID}">LINK</a> || MRP: Rs.#{val.Product_MRP} || SGST: #{val.Applicable_SGST}% || CGST: #{val.Applicable_CGST}% || Cost(1 Quantity): Rs.#{pro_total[index]} || Quantity: #{val.Quantity} || Overall Cost: Rs.#{pro_q_total[index]}</p>
                                    
                                </div>
                            end
                        </div>
                        <div class="mx-7 mt-2 d-flex flex justify-content-end" style="width: 100%;">
                            <p class="text.dark"><span class="fw-bold">Total Amount: </span>Rs.#{total}/- </p>
                        </div>
                        
                        if code_coupon == 'true'
                            <div class="mx-7 mt-2 d-flex flex justify-content-end text-success" style="width: 100%;">
                                <p class="text.dark"><span class="fw-bold">Coupon Applied! </span></p>
                            </div>
                        
    

                        


                        
                        <div class="container"> 
                            <form action="checkout" method="POST" class="mt-4">
                                <div class="mt-3"><label >Select from Available Coupons:</label>
                                <select class="form-control" name="couponC">
                                    <option>Select Coupon</option>
                                    each val3 in coupon
                                        <option>#{val3.CouponCode} || Discount Rate: #{val3.Discount_Rate} || Maximum Discount: #{val3.Maximum_Discount}</option>
                                    end
                                </select></div>
                                <div class="mt-3">
                                <label>Select Payment Method:</label>
                                <select class="form-control" name="payC">
                                    <option>Select Payment Option</option>
                                    each val3 in creditDebit
                                        <option>#{val3[0].PaymentID} || Card Number: #{val3[0].Card_Number} || Holder Name: #{val3[0].Holder_Name} || Expiry Date: #{val3[0].Expiry_Date}</option>
                                    end
                                    each val3 in Net_Banking
                                        <option>#{val3[0].PaymentID} || Account Number: #{val3[0].Account_Number} || Holder Name: #{val3[0].Holder_Name} || Bank Name: #{val3[0].Bank_Name} || IFSC Code: #{val3[0].IFSC_Code}</option>
                                    end
                                    each val3 in UPI
                                        <option>#{val3[0].PaymentID} || UPI ID: #{val3[0].UPI_ID} </option>
                                    end
                                </select>
                                </div>
                                <div class="mt-3">
                                <label >Select Delivery Address:</label>
                                <select class="form-control" name="deliveryAddC">
                                    <option>Select Delivery Address:</option>
                                    each val in customer_address
                                        <option>#{val.AddressId} || Street: #{val.Street}, Address Line: #{val.Address_Line}, District: #{val.District}, City: #{val.City}, Pincode: #{val.Pincode}, Country: #{val.Country}</option>
                                </select>
                                </div>
                                <p class="text-danger mt-4 text-center">#{error}</p>
                                <div class="mt-4 d-flex flex justify-content-between">
                                    <p class="mt-3 flex-end"><button type="submit" class="btn btn-success" >Confirm</button></p>
                                </div>
                                
                            </form>
                            <div class=" d-flex flex justify-content-between">
                               <p class="mt-1 flex-center"><a href="/"><button class="btn btn-danger">Cancel</button></a></p>
                            </div>
                            
                        </div>
                    </div>
                </div>    
            </div>
        </div>

            
            

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </body>

</html>